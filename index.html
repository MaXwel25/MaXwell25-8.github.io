                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <!DOCTYPE html>

<html>

 <html lang="ru"></html>
  <head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Задание 8</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"/>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick-theme.css"/>
    <script src="script.js"></script>
  </head>
  
  <body>

      <main>

          <header class="col-12">
              <img id="logo" src="https://i.pinimg.com/736x/68/6a/c1/686ac1eb7845dbf62368e920209ad5d7.jpg" />


              <div class="welcome"><b>Сайт с котятами</b></div>

          </header>

          <nav class="navigation">
              <div>
                  <ul class="flex-container1">
                      <li><a href="https://kubsu.ru">КубГУ</a></li>
                      <li><a href="https://vk.com/index.php?ysclid=m1i3xk04t886878099">ВКонтаке</a></li>
                      <li>
                          <div class="dropdown">
                              <button class="dropbtn">Меню Ссылок</button>
                              <div class="dropdown-content">
                                  <a href="https://www.citilink.ru/?_action=autologin&_success_login=1">Ситилинк</a>
                                  <a href="https://kuban.mts.ru/personal">МТС</a>
                                  <a href="https://ru.wikipedia.org/">Википедия</a>
                              </div>
                          </div>
                      </li>
                  </ul>
              </div>
          </nav>
<div class = "row">
  <div class = "change_hyperlink block_chang_hyp">
    <div class="gallery">
      <div class="photo"><img src="https://i.pinimg.com/736x/c0/8e/8f/c08e8f636c55f32a7da5d5d6e2a8bc6c.jpg" alt="1" /></div>
      <div class="photo"><img src="https://i.pinimg.com/736x/5a/63/a5/5a63a5f1bad114d08640265ea440e001.jpg" alt="2" /></div>
      <div class="photo"><img src="https://i.pinimg.com/736x/49/01/05/4901059d7bfbb4db41f3169b7613b9d7.jpg" alt="3" /></div>
      <div class="photo"><img src="https://i.pinimg.com/originals/ae/be/80/aebe80513552b66cd280640684d67bbb.jpg" alt="4" /></div>
      <div class="photo"><img src="https://i.pinimg.com/736x/5f/82/30/5f82304f0ae6afab892c60f136500210.jpg" alt="5" /></div>
      <div class="photo"><img src="https://i.pinimg.com/originals/e6/d8/39/e6d839d006a380f335ad2f6b2c9a3523.jpg" alt="6" /></div>
      <div class="photo"><img src="https://images.wallpaperscraft.ru/image/single/most_kamni_reka_58661_720x1280.jpg" alt="7" /></div>
      <div class="photo"><img src="https://i.pinimg.com/736x/25/49/ca/2549caacdd80acdae3c4ea068862cfb3.jpg" alt="8" /></div>
    </div>
  </div>
</div>


          <div class="row">
              <div class="change_hyperlink block_chang_hyp">
                  <div class="hname"><h2>Маркированный список:</h2></div>
                  <div class="otsyp">
                      <ul>
                          <li><a href="http://www.kubsu.ru/" target="_blank">Ссылка на главную страницу КубГУ(http)</a></li>
                          <li><a href="https://www.kubsu.ru/" target="_blank">Ссылка на главную страницу КубГУ(https)</a></li>
                          <li>
                              <em>Ночной университет<br /></em>
                              <a href="http://www.kubsu.ru/"><img src="https://i5.photo.2gis.com/images/branch/0/30258560051398423_4290.jpg" style="width: 400px;" /></a>
                          </li>
                          <li><a href="html2.html">Сокращенная ссылка на внутреннюю страницу</a></li>
                          <li><a href="Web-1.html">Сокращенная ссылка на главную страницу</a></li>
                          <li><a href="#biography">Ссылка на фрагмент текущей страницы</a></li>
                          <li><a href="https://www.imdb.com/search/title/?genres=action&sort=year,desc&rating=7.0,10.0">Ссылка с тремя параметрами</a></li>
                          <li><a href="https://www.example.com/item?id=123">Ссылка с параметром id</a></li>
                          <li><a href="S-1.html">Относительная ссылка на страницу в текущем каталоге</a></li>
                          <li><a href="../about/page.html">Относительная ссылка на страницу в каталоге about</a></li>
                          <li><a href="https://www.dns-shop.ru/catalog">Относительная ссылка на страницу в каталоге уровнем выше</a></li>
                          <li><a href="https://www.citilink.ru/promo/samsung/">Относительная ссылка на страницу в каталоге двумя уровнями выше</a></li>
                          <li>Контекстная ссылка в тексте абзаца: <a href="https://rutube.ru/channel/28219202/videos/">ссылка на сайт</a>.</li>
                          <li><a href="https://en.wikipedia.org/wiki/Soviet_Union#Geography">Ссылка на фрагмент страницы стороннего сайта</a></li>
                          <li>
                              <img src="https://i.pinimg.com/736x/66/89/49/668949d1d93bb38eae7557e6b3defa4a.jpg" style="width: 400px;" alt="Пример изображения" usemap="#image-map" />
                              <map name="image-map">
                                  <area shape="rect" coords="34,44,270,350" href="https://yandex.ru/maps/35/krasnodar/?ll=38.975313%2C45.035470&z=13" alt="Прямоугольная ссылка" />
                                  <area shape="circle" coords="337,300,44" href="https://mail.ru" alt="Круглая ссылка" />
                              </map>
                          </li>
                          </li>
                          <li><a href="">Ссылка с пустым href</a></li>
                          <li><a>Ссылка без href</a></li>
                          <li><a href="https://www.mvideo.ru/" rel="nofollow">Ссылка, по которой запрещен переход поисковикам</a></li>
                          <li><a href="https://moodle.kubsu.ru/" rel="noindex">Запрещенная для индексации поисковиками</a></li>
                          <li>
                              <ol>
                                  <li><a href="https://lichess.org/" title="Первый пункт">Ссылка 1</a></li>
                                  <li><a href="https://rog.asus.com/ru/" title="Второй пункт">Ссылка 2</a></li>
                                  <li><a href="https://vk.com/feed" title="Третий пункт">Ссылка 3</a></li>
                              </ol>
                          </li>
                          <li><a href="ftp://username:password@ftp.example.com/file.txt">Ссылка на файл на сервере FTP с авторизацией</a></li>
                      </ul>
                  </div>
              </div>
              <br />


              <div class="change_hyperlink_table block_chang_table">


                  <div class="fname"><h3>Заказать продукты оптом</h3></div>
                  <script src="orderform.js"></script>
                  <div class="container my-4">
                      <h2>Калькулятор стоимости товара</h2>
                      <form id="orderForm">
                          <div class="form-group">
                              <label for="product">Выберите товар:</label>
                              <select id="product" class="form-control">
                                  <option value="0">-- Выберите товар --</option>
                                  <option value="80">Чай - 80 руб.</option>
                                  <option value="100">Кофе - 100 руб.</option>
                                  <option value="62">Молоко - 62 руб.</option>
                                  <option value="180">Масло - 180 руб.</option>
                                  <option value="50">Хлеб - 50 руб.</option>
                                  <option value="44">Гречка - 44 руб.</option>
                              </select>
                          </div>
                          <div class="form-group">
                              <label for="quantity">Количество:</label>
                              <input type="number" id="quantity" class="form-control" min="1" required oninput="calculateTotalCost()">
                          </div>
                      </form>

                      <form id="serviceForm">
                          <div class="form-group">
                              <label>Выберете дополнрительную функцию:</label>
                              <div>
                                  <input type="radio" name="serviceType" value="1" onclick="updateServiceOptions()" checked>Без ничего<br>
                                  <input type="radio" name="serviceType" value="2" onclick="updateServiceOptions()"> Пакет<br>
                                  <input type="radio" name="serviceType" value="3" onclick="updateServiceOptions()"> Доставить<br>
                              </div>
                          </div>
                          <div id="optionsContainer" class="form-group" min="1" required: style="display: none;">
                              <label for="options">Выберите опцию:</label>
                              <select id="options" class="form-control" onchange="calculateTotalCost()">
                                  <option value="0">-- Выберите опцию --</option>
                                  <option value="5">Маленькеий пакет</option>
                                  <option value="10">Большой пакет</option>
                              </select>
                          </div>
                <div id="propertyContainer" class="form-group" style="display: none;">
                    <label><input type="checkbox" id="property" onchange="calculateTotalCost()"> Доставка ( 500 руб.)</label>
                </div>
               
            </form>
         
            <h3 class="mt-4">Общая стоимость: <span id="totalCost">0</span> руб.</h3>
        </div>
                  <br /><br /><br />

                  <table>
                      <thead>

                          <tr>
                              <th>Продукт</th>
                              <th>Категория</th>
                              <th colspan="2">Цена</th>
                          </tr>
                      </thead>
                      <tbody>
                          <tr class="odd">
                              <td>Чай</td>
                              <td>Напитки</td>
                              <td colspan="2">80 рублей</td>
                          </tr>
                          <tr class="even">
                              <td>Кофе</td>
                              <td>Напитки</td>
                              <td colspan="2">100 рублей</td>
                          </tr>
                          <tr class="odd">
                              <td>Молоко</td>
                              <td>Молочный</td>
                              <td colspan="2">62 рублей</td>
                          </tr>
                          <tr class="even">
                              <td>Масло</td>
                              <td>Молочный</td>
                              <td colspan="2">180 рублей</td>
                          </tr>
                          <tr class="odd">
                              <td>Хлеб</td>
                              <td>Хлебо-бучный</td>
                              <td colspan="2">50 рублей</td>
                          </tr>
                          <tr class="even">
                              <td>Гречка</td>
                              <td>Крупы</td>
                              <td colspan="2">44 рубля</td>
                          </tr>
                      </tbody>
                  </table>
              </div>

<div class="change_forma block_forma">
 <h1 id="section" class="text-center my-4">Форма обратной связи</h1>
 <button id="openFormBtn" class="btn btn-primary">Открыть форму обратной связи</button>

  <div id="modal">
    <div id="modalContent">
        <form id="contactForm" class="contact-form">
            <div class="mb-3">
                <label for="name" class="form-label">ФИО:</label>
                <input type="text" id="name" name="name" class="form-control" required>
            </div>

            <div class="mb-3">
                <label for="phone" class="form-label">Телефон:</label>
                <input type="tel" id="phone" name="phone" class="form-control" required>
            </div>

            <div class="mb-3">
                <label for="email" class="form-label">Email:</label>
                <input type="email" id="email" name="email" class="form-control" required>
            </div>

            <div class="mb-3">
                <label for="organization" class="form-label">Организация:</label>
                <input type="text" id="organization" name="organization" class="form-control">
            </div>

            <div class="mb-3">
                <label for="message" class="form-label">Сообщение:</label>
                <textarea id="message" name="message" class="form-control" rows="5" required></textarea>
            </div>

            <div class="mb-3 form-check">
                <input type="checkbox" id="policy" name="policy" class="form-check-input" required>
                <label for="policy" class="form-check-label">Согласие с политикой обработки персональных данных</label>
            </div>

            <button type="submit" class="btn btn-primary">Отправить</button>
        </form>
    </div>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
        const openFormBtn = document.getElementById('openFormBtn');
        const modal = document.getElementById('modal');
        const contactForm = document.getElementById('contactForm');

        // Функция открытия попапа с формой
        function openModal() {
            modal.style.display = 'flex';
            history.pushState({ formOpen: true }, null, '#contact-form');
            loadFormData(); // Восстановление данных из LocalStorage
        }

        // Функция закрытия попапа
        function closeModal() {
            modal.style.display = 'none';
            history.back();
        }

        // Кнопка открытия формы
        openFormBtn.addEventListener('click', openModal);

        // Закрытие формы при нажатии "Назад" в браузере
        window.addEventListener('popstate', (event) => {
            if (!event.state?.formOpen) closeModal();
        });

        // Валидация формы и отправка данных через fetch
        contactForm.addEventListener('submit', async (event) => {
            event.preventDefault();
            if (!validateForm()) return;

            const formData = new FormData(contactForm);
            try {
                const response = await fetch('https://formcarry.com/s/z3-AJDUQMbE', {
                    method: 'POST',
                    headers: {
                        'Accept': 'application/json'  // Установка Accept заголовка для ожидания JSON ответа
                    },
                    body: formData
                });
                
                if (response.ok) {
                    alert('Сообщение отправлено успешно!');
                    clearFormData();
                    closeModal();
                } else {
                    const errorMessage = await response.text(); // Получаем текст ошибки
                    alert(`Сообщение не доставлено. Статус: ${response.status}. Текст ошибки: ${errorMessage}`);
                }
            } catch (error) {
                alert(error.message);
            }
        });

        // Функция для сохранения данных формы в LocalStorage
        function saveFormData() {
            const data = {
                name: document.getElementById('name').value,
                phone: document.getElementById('phone').value,
                email: document.getElementById('email').value,
                organization: document.getElementById('organization').value,
                message: document.getElementById('message').value
            };
            localStorage.setItem('contactFormData', JSON.stringify(data));
        }

        // Восстановление данных из LocalStorage
        function loadFormData() {
            const data = JSON.parse(localStorage.getItem('contactFormData'));
            if (data) {
                document.getElementById('name').value = data.name;
                document.getElementById('phone').value = data.phone;
                document.getElementById('email').value = data.email;
                document.getElementById('organization').value = data.organization;
                document.getElementById('message').value = data.message;
            }
        }

        // Очистка данных формы и LocalStorage после отправки
        function clearFormData() {
            localStorage.removeItem('contactFormData');
            contactForm.reset();
        }

        // Валидация полей формы
        function validateForm() {
            saveFormData();  // Сохранение данных перед валидацией
            const name = document.getElementById('name').value;
            const nameRegex = /^[А-Яа-яЁё]+\s[А-Яа-яЁё]+\s[А-Яа-яЁё]+$/;
            if (!nameRegex.test(name)) {
                alert("ФИО должно быть на кириллице и содержать 3 слова.");
                return false;
            }
            const phone = document.getElementById('phone').value;
            const phoneRegex = /^\+79\d{9}$/;
            if (!phoneRegex.test(phone)){
                alert("Телефон должен начинаться с +79 и содержать 8 цифр после.");
                return false;
            }
            const email = document.getElementById('email').value;
            if (email.length < 6) {
            alert("Email должен содержать не менее 6 символов.");
                return false;
            }
            const organization = document.getElementById('organization').value;
            if (organization.length < 3) {
                alert("Компания должна иметь минимум 3 символа в названии.");
                return false;
            }
            const message = document.getElementById('message').value;
            if (message.length < 10) {
                alert("Сообщение должно быть не меньше 10 символов.");
                return false;
            }
            return true;
        }
    });
 </script>
                  
</div>
<br></br>

      </main>
      <footer>
          <div class="container">
              <p>© 2024 Сайт с котятами. Варфоломеев Максим.</p>
          </div>
      </footer>
      </div>
      <script>
            function updateServiceOptions() {
                const serviceType = document.querySelector('input[name="serviceType"]:checked').value;
                const optionsContainer = document.getElementById('optionsContainer');
                const propertyContainer = document.getElementById('propertyContainer');
    
                if (serviceType === "1") {
                    optionsContainer.style.display = "none";
                    propertyContainer.style.display = "none";
                } else if (serviceType === "2") {
                    optionsContainer.style.display = "block";
                    propertyContainer.style.display = "none";
                } else if (serviceType === "3") {
                    optionsContainer.style.display = "none";
                    propertyContainer.style.display = "block";
                }
            }
    
            function calculateTotalCost() {
                // Расчет стоимости товара
                const productSelect = document.getElementById('product');
                const productPrice = parseFloat(productSelect.value);
                const quantityInput = document.getElementById('quantity');
                const productQuantity = parseInt(quantityInput.value);
                let totalProductCost = 0;
    		
                if (productPrice > 0 && productQuantity > 0) {
                    totalProductCost = productPrice * productQuantity;
                }
    
                // Расчет стоимости услуги
                const serviceType = document.querySelector('input[name="serviceType"]:checked').value;
                const serviceQuantity = 1;
                let baseServicePrice = 0; // Базовая цена для всех услуг
                let totalServiceCost = 0;
    
                if (serviceType === "2") {
                    const optionSelect = document.getElementById('options');
                    const optionPrice = parseFloat(optionSelect.value);
                    if (optionPrice > 0 ) {
                        baseServicePrice += optionPrice;
                    }
                } else if (serviceType === "3") {
                    const propertyChecked = document.getElementById('property').checked;
                    if (propertyChecked) {
                        baseServicePrice += 500; // Добавляем стоимость свойства
                    }
                }
    
                totalServiceCost = baseServicePrice * 1;
    
                // Общая стоимость
                const totalCost = totalProductCost + totalServiceCost;
                document.getElementById('totalCost').textContent = totalCost;
            }
        </script>
  </body>

</html>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  